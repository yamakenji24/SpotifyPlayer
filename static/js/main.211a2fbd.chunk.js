(this.webpackJsonpreactplayer=this.webpackJsonpreactplayer||[]).push([[0],{36:function(e,t,n){e.exports=n(67)},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(32),u=n.n(c),o=n(15),s=n(2),i=n(17),l=n(18),m="0c251c3b17e546a980025a2f3cee60cb",f=btoa(m+":e68e451111264ceea41fe6bf4b490d28");function p(){var e=Object(i.a)(["\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid palevioletred;\n  border-radius: 3px;\n"]);return p=function(){return e},e}function d(){var e=Object(i.a)(["\n  text-align: center;\n"]);return d=function(){return e},e}var h=function(){return r.createElement(r.Fragment,null,r.createElement(b,null,"Welcome to my TopPage"),r.createElement(E,{onClick:function(){/localhost:3000\/$/.test(window.location.href)&&(window.location.href="https://accounts.spotify.com/authorize?client_id="+m+"&redirect_uri=http://localhost:3000/callback/&response_type=code&state=123")}},"Login"))},b=l.a.h1(d()),E=l.a.button(p()),v=function(){return r.createElement(h,null)},g=n(1),j=n.n(g),k=n(5),w=n(3),O=function(){var e=Object(r.useState)(!1),t=Object(w.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),u=Object(w.a)(c,2),o=u[0],i=u[1],l=function(){var e=window.location.href.match(/(?:code)=([\S\s]*?)&/);return null!==e?Promise.resolve(e[1]):Promise.reject(new Error("null code"))},m=function(){var e=Object(k.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){if(!e.ok)throw Error(e.statusText);return e},e.next=3,fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:"Basic ".concat(f),"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=authorization_code&code=".concat(t,"&redirect_uri=").concat("http://localhost:3000/callback/")}).then(n).then((function(e){return Promise.resolve(e.json())})).catch((function(e){return Promise.reject(new Error(e))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(k.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:return t=e.sent,e.next=6,m(t);case 6:n=e.sent,sessionStorage.setItem("accessToken",n.access_token),sessionStorage.setItem("refreshToken",n.refresh_token),i(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a(!0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[]),n?r.createElement(s.a,{to:"/"}):o?r.createElement(s.a,{to:"/search"}):r.createElement(r.Fragment,null,r.createElement("p",null,"Loading...."))},y=(n(47),function(e){var t=e.artists;return r.createElement(r.Fragment,null,""!==t[0].id?t.map((function(e){return r.createElement("div",{key:e.id,className:"artist"},r.createElement("img",{alt:e.name,src:void 0===e.image?void 0:e.image.url}),r.createElement("p",null,e.name))})):r.createElement(r.Fragment,null,r.createElement("p",null,"Now Loading Artist...")))}),A=(n(48),function(e){var t=e.albums;return r.createElement(r.Fragment,null,""!==t[0].id?t.map((function(e){return r.createElement("div",{key:e.id,className:"album"},r.createElement("img",{alt:e.name,src:void 0===e.image?void 0:e.image.url}),r.createElement("h3",null,e.name),r.createElement("p",null,"By ",e.artist))})):r.createElement(r.Fragment,null,r.createElement("p",null,"Now Loading Album....")))}),L=(n(49),function(e){var t=function(e){var t=Object(r.useState)(new Audio(e)),n=Object(w.a)(t,1)[0],a=Object(r.useState)(!1),c=Object(w.a)(a,2)[1],u=function(){return c((function(e){return!e}))};return Object(r.useEffect)((function(){return n.addEventListener("play",u),n.addEventListener("pause",u),n.addEventListener("ended",u),function(){n.removeEventListener("play",u),n.removeEventListener("pause",u),n.removeEventListener("ended",u)}}),[]),[!n.paused,n]}(e),n=Object(w.a)(t,2),a=n[0],c=n[1];return r.createElement(r.Fragment,null,r.createElement("button",{onClick:function(){a?c.pause():c.play()}},a?"Pause":"Play"))}),x=function(e){var t=e.tracks;return r.createElement(r.Fragment,null,""!==t[0].id?t.map((function(e,t){return r.createElement("div",{key:e.id},r.createElement("p",null,t+1),r.createElement("h4",null,e.name),e.playUrl?L(e.playUrl):r.createElement("p",null,"no MP3 URL"))})):r.createElement(r.Fragment,null,r.createElement("p",null,"Now Loading Tracks...")))},P=n(11),T=n.n(P),S=function(){var e=Object(r.useState)(""),t=Object(w.a)(e,2),n=t[0],a=t[1],c=Object(s.g)(),u=Object(r.useState)(""),o=Object(w.a)(u,2),i=o[0],l=o[1],m=function(e,t){var n=Object(r.useState)([{id:"",name:"",image:{height:0,url:"",width:0}}]),a=Object(w.a)(n,2),c=a[0],u=a[1],o=function(){var n=Object(k.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.get("https://api.spotify.com/v1/search?q=".concat(t,"&type=artist"),{headers:{Authorization:"Bearer "+e}}).then((function(e){return e.data})).then((function(e){var t=e.artists.items.map((function(e){return{id:e.id,name:e.name,image:e.images[1]}}));return Promise.resolve(t)})).catch((function(e){return Promise.reject(new Error(e))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(k.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=5;break}return e.next=3,o();case 3:n=e.sent,u(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),{artists:c}}(i,n).artists,f=function(e,t){var n=Object(r.useState)([{id:"",name:"",artist:"",image:{height:0,url:"",width:0}}]),a=Object(w.a)(n,2),c=a[0],u=a[1],o=function(){var n=Object(k.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.get("https://api.spotify.com/v1/search?q=".concat(t,"&type=album"),{headers:{Authorization:"Bearer "+e}}).then((function(e){return e.data})).then((function(e){var t=e.albums.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,image:e.images[1]}}));return Promise.resolve(t)})).catch((function(e){return Promise.reject(new Error(e))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(k.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=5;break}return e.next=3,o();case 3:n=e.sent,u(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),{albums:c}}(i,n).albums,p=function(e,t){var n=Object(r.useState)([{id:"",name:"",artists:"",playUrl:""}]),a=Object(w.a)(n,2),c=a[0],u=a[1],o=function(){var n=Object(k.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.a.get("https://api.spotify.com/v1/search?q=".concat(t,"&type=track"),{headers:{Authorization:"Bearer "+e}}).then((function(e){return e.data})).then((function(e){var t=e.tracks.items.map((function(e){return{id:e.id,name:e.name,artists:e.artists[0].name,playUrl:e.preview_url}}));return Promise.resolve(t)})).catch((function(e){return Promise.reject(new Error(e))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(k.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=5;break}return e.next=3,o();case 3:n=e.sent,u(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),{tracks:c}}(i,n).tracks,d=function(){var e=Object(k.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=sessionStorage.getItem("accessToken"))||(sessionStorage.removeItem("accessToken"),c.push("/")),e.next=4,l(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){d()}),[]),[a,{artists:m,albums:f,tracks:p}]},_=(n(66),function(){var e=Object(r.useState)("ARTIST_PANEL"),t=Object(w.a)(e,2),n=t[0],a=t[1],c=S(),u=Object(w.a)(c,2),o=u[0],s=u[1],i=s.artists,l=s.albums,m=s.tracks,f=Object(r.useCallback)((function(e){a(function(e){switch(e){case"ARTIST_PANEL":return"ARTIST_PANEL";case"ALBUM_PANEL":return"ALBUM_PANEL";case"TRACK_PANEL":return"TRACK_PANEL";default:return"UNSELECTED"}}(e.currentTarget.name))}),[]),p=Object(r.useCallback)((function(e){o(e.target.value)}),[]);return r.createElement(r.Fragment,null,r.createElement("div",{className:"searchBar-wrapper"},r.createElement("p",null,"Search for an Artists, Song or Album"),r.createElement("input",{autoFocus:!0,placeholder:"start typing...",onChange:p})),r.createElement("div",{className:"navbar-wrapper"},r.createElement("button",{name:"ARTIST_PANEL",onClick:f},"Artists"),r.createElement("button",{name:"ALBUM_PANEL",onClick:f},"Albums"),r.createElement("button",{name:"TRACK_PANEL",onClick:f},"Tracks")),r.createElement("div",{className:"panel_display"},function(){switch(n){case"ARTIST_PANEL":return r.createElement(y,{artists:i});case"ALBUM_PANEL":return r.createElement(A,{albums:l});case"TRACK_PANEL":return r.createElement(x,{tracks:m});default:return null}}()))}),N=function(){return r.createElement(r.Fragment,null,r.createElement(_,null))};document.addEventListener("DOMContentLoaded",(function(){u.a.render(a.a.createElement(o.a,null,a.a.createElement(s.d,null,a.a.createElement(s.b,{exact:!0,path:"/",component:v}),a.a.createElement(s.b,{path:"/callback/",component:O}),a.a.createElement(s.b,{path:"/search",component:N}))),document.getElementById("root"))}))}},[[36,1,2]]]);
//# sourceMappingURL=main.211a2fbd.chunk.js.map